<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>aptly - Configuration</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel="shortcut icon" href=/favicon.ico>
<link type=text/css rel=stylesheet href=/css/styles.css>
<link rel=canonical href=https://www.aptly.info/doc/configuration/>
<link href=/post/index.xml rel=alternate type=application/rss+xml title="Debian repository management tool">
</head>
<body>
<header id=page-header>
<div class=container>
<nav class="navbar navbar-default navbar-static-top" role=navigation>
<ul class="nav navbar-nav nav-justified">
<li><a href=/tutorial/>tutorials</a></li>
<li><a href=/download/>download</a></li>
<li><a href=/support/>support</a></li>
<li class=active><a href=/doc/overview/>documentation</a></li>
<li><a href=/about/>about</a></li>
<li><a href=/post/>blog</a></li>
</ul>
</nav>
<div class=row>
<div class="col-md-6 col-md-offset-3 text-center">
<a class=brand href=/>
<i class=brand-logo></i>
<span class=brand-name>aptly</span>
</a>
</div>
</div>
</div>
</header>
<section class=documentation>
<div class=container>
<div class=sidebar-overlay></div>
<div class=row>
<div class="col-md-3 col-sm-3 col-xs-3">
<div class=sidebar>
<ul class="nav nav-sidebar">
<li>
<a href=/doc/overview/>Overview</a>
</li>
<li>
<a href=/doc/why/>Why aptly?</a>
</li>
<li>
<a href=/doc/faq/>FAQ</a>
</li>
<li>
<a href=/doc/features/>Features</a>
<ul class=nav>
<li>
<a href=/doc/feature/query/>Package Queries</a>
</li>
<li>
<a href=/doc/feature/duplicate/>Duplicate Packages</a>
</li>
<li>
<a href=/doc/feature/s3/>Publishing to S3</a>
</li>
<li>
<a href=/doc/feature/swift/>Publishing to Swift</a>
</li>
<li>
<a href=/doc/feature/filesystem/>Filesystem Publishing</a>
</li>
<li>
<a href=/doc/feature/multi-component/>Multi-Component Publishing</a>
</li>
<li>
<a href=/doc/feature/pgp-providers/>PGP Providers</a>
</li>
<li>
<a href=/doc/feature/package-display/>Package Display Format</a>
</li>
<li>
<a href=/doc/feature/dependencies/>Dependency Resolving</a>
</li>
</ul>
</li>
<li class=active>
<a href=/doc/configuration/>Configuration</a>
</li>
<li>
<a href=/doc/commands/>Commands</a>
<ul class=nav>
<li>
<a href=/doc/aptly/flags/>Global Flags</a>
</li>
<li>
<a href=/doc/aptly/mirror/>aptly mirror</a>
<ul class=nav>
<li>
<a href=/doc/aptly/mirror/create/>aptly mirror create</a>
</li>
<li>
<a href=/doc/aptly/mirror/update/>aptly mirror update</a>
</li>
<li>
<a href=/doc/aptly/mirror/list/>aptly mirror list</a>
</li>
<li>
<a href=/doc/aptly/mirror/show/>aptly mirror show</a>
</li>
<li>
<a href=/doc/aptly/mirror/edit/>aptly mirror edit</a>
</li>
<li>
<a href=/doc/aptly/mirror/search/>aptly mirror search</a>
</li>
<li>
<a href=/doc/aptly/mirror/rename/>aptly mirror rename</a>
</li>
<li>
<a href=/doc/aptly/mirror/drop/>aptly mirror drop</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/repo/>aptly repo</a>
<ul class=nav>
<li>
<a href=/doc/aptly/repo/create/>aptly repo create</a>
</li>
<li>
<a href=/doc/aptly/repo/add/>aptly repo add</a>
</li>
<li>
<a href=/doc/aptly/repo/include/>aptly repo include</a>
</li>
<li>
<a href=/doc/aptly/repo/import/>aptly repo import</a>
</li>
<li>
<a href=/doc/aptly/repo/show/>aptly repo show</a>
</li>
<li>
<a href=/doc/aptly/repo/list/>aptly repo list</a>
</li>
<li>
<a href=/doc/aptly/repo/copy/>aptly repo copy</a>
</li>
<li>
<a href=/doc/aptly/repo/move/>aptly repo move</a>
</li>
<li>
<a href=/doc/aptly/repo/remove/>aptly repo remove</a>
</li>
<li>
<a href=/doc/aptly/repo/search/>aptly repo search</a>
</li>
<li>
<a href=/doc/aptly/repo/edit/>aptly repo edit</a>
</li>
<li>
<a href=/doc/aptly/repo/rename/>aptly repo rename</a>
</li>
<li>
<a href=/doc/aptly/repo/drop/>aptly repo drop</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/snapshot/>aptly snapshot</a>
<ul class=nav>
<li>
<a href=/doc/aptly/snapshot/create/>aptly snapshot create</a>
</li>
<li>
<a href=/doc/aptly/snapshot/list/>aptly snapshot list</a>
</li>
<li>
<a href=/doc/aptly/snapshot/show/>aptly snapshot show</a>
</li>
<li>
<a href=/doc/aptly/snapshot/verify/>aptly snapshot verify</a>
</li>
<li>
<a href=/doc/aptly/snapshot/pull/>aptly snapshot pull</a>
</li>
<li>
<a href=/doc/aptly/snapshot/filter/>aptly snapshot filter</a>
</li>
<li>
<a href=/doc/aptly/snapshot/diff/>aptly snapshot diff</a>
</li>
<li>
<a href=/doc/aptly/snapshot/merge/>aptly snapshot merge</a>
</li>
<li>
<a href=/doc/aptly/snapshot/search/>aptly snapshot search</a>
</li>
<li>
<a href=/doc/aptly/snapshot/rename/>aptly snapshot rename</a>
</li>
<li>
<a href=/doc/aptly/snapshot/drop/>aptly snapshot drop</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/package/>aptly package</a>
<ul class=nav>
<li>
<a href=/doc/aptly/package/search/>aptly package search</a>
</li>
<li>
<a href=/doc/aptly/package/show/>aptly package show</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/publish/>aptly publish</a>
<ul class=nav>
<li>
<a href=/doc/aptly/publish/snapshot/>aptly publish snapshot</a>
</li>
<li>
<a href=/doc/aptly/publish/repo/>aptly publish repo</a>
</li>
<li>
<a href=/doc/aptly/publish/update/>aptly publish update</a>
</li>
<li>
<a href=/doc/aptly/publish/switch/>aptly publish switch</a>
</li>
<li>
<a href=/doc/aptly/publish/list/>aptly publish list</a>
</li>
<li>
<a href=/doc/aptly/publish/show/>aptly publish show</a>
</li>
<li>
<a href=/doc/aptly/publish/drop/>aptly publish drop</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/db/>aptly db</a>
<ul class=nav>
<li>
<a href=/doc/aptly/db/cleanup/>aptly db cleanup</a>
</li>
<li>
<a href=/doc/aptly/db/recover/>aptly db recover</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/task/>aptly task</a>
<ul class=nav>
<li>
<a href=/doc/aptly/task/run/>aptly task run</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/serve/>aptly serve</a>
</li>
<li>
<a href=/doc/aptly/config/>aptly config</a>
<ul class=nav>
<li>
<a href=/doc/aptly/config/show/>aptly config show</a>
</li>
</ul>
</li>
<li>
<a href=/doc/aptly/graph/>aptly graph</a>
</li>
</ul>
</li>
<li>
<a href=/doc/api/>API</a>
<ul class=nav>
<li>
<a href=/doc/api/repos/>Local Repos API</a>
</li>
<li>
<a href=/doc/api/files/>File Upload API</a>
</li>
<li>
<a href=/doc/api/snapshots/>Snapshot API</a>
</li>
<li>
<a href=/doc/api/publish/>Publish API</a>
</li>
<li>
<a href=/doc/api/packages/>Package API</a>
</li>
<li>
<a href=/doc/api/misc/>Misc API</a>
</li>
</ul>
</li>
<li>
<a href=/doc/integrations/>Integrations</a>
</li>
</ul>
<div class=source-buttons>
<a href=/download/ class="btn btn-danger">Download</a>
<a href=https://github.com/aptly-dev/aptly class="btn btn-default">Github</a>
</div>
</div>
</div>
<div class="col-md-9 col-sm-9 col-xs-9">
<h2 id=configuration>Configuration</h2>
<p>aptly looks for configuration file first in <code>~/.aptly.conf</code> then
in <code>/etc/aptly.conf</code> and, if no config file found, new one is created in
home directory. If <code>-config=</code> flag is specified, aptly would use config file at specified
location. Also aptly needs root directory for database, package and
published repository storage. If not specified, directory defaults to
<code>~/.aptly</code>, it will be created if missing.</p>
<p>Configuration files do not cascade. The file that gets loaded must contain all
configurations for a given aptly instance.</p>
<p>Configuration file is stored in JSON format (default values shown
below):</p>
<pre><code>{
  &quot;rootDir&quot;: &quot;$HOME/.aptly&quot;,
  &quot;downloadConcurrency&quot;: 4,
  &quot;downloadSpeedLimit&quot;: 0,
  &quot;architectures&quot;: [],
  &quot;dependencyFollowSuggests&quot;: false,
  &quot;dependencyFollowRecommends&quot;: false,
  &quot;dependencyFollowAllVariants&quot;: false,
  &quot;dependencyFollowSource&quot;: false,
  &quot;dependencyVerboseResolve&quot;: false,
  &quot;gpgDisableSign&quot;: false,
  &quot;gpgDisableVerify&quot;: false,
  &quot;gpgProvider&quot;: &quot;gpg&quot;,
  &quot;downloadSourcePackages&quot;: false,
  &quot;skipLegacyPool&quot;: true,
  &quot;ppaDistributorID&quot;: &quot;ubuntu&quot;,
  &quot;ppaCodename&quot;: &quot;&quot;,
  &quot;FileSystemPublishEndpoints&quot;: {
    &quot;test&quot;: {
      &quot;rootDir&quot;: &quot;/opt/aptly-publish&quot;,
      &quot;linkMethod&quot;: &quot;copy&quot;,
      &quot;verifyMethod&quot;: &quot;md5&quot;
    }
  },
  &quot;S3PublishEndpoints&quot;: {
    &quot;test&quot;: {
      &quot;region&quot;: &quot;us-east-1&quot;,
      &quot;bucket&quot;: &quot;repo&quot;,
      &quot;endpoint&quot;: &quot;&quot;,
      &quot;awsAccessKeyID&quot;: &quot;&quot;,
      &quot;awsSecretAccessKey&quot;: &quot;&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;acl&quot;: &quot;public-read&quot;,
      &quot;storageClass&quot;: &quot;&quot;,
      &quot;encryptionMethod&quot;: &quot;&quot;,
      &quot;plusWorkaround&quot;: false,
      &quot;disableMultiDel&quot;: false,
      &quot;forceSigV2&quot;: false,
      &quot;debug&quot;: false
    }
  },
  &quot;SwiftPublishEndpoints&quot;: {
    &quot;test&quot;: {
      &quot;container&quot;: &quot;repo&quot;,
      &quot;osname&quot;: &quot;&quot;,
      &quot;password&quot;: &quot;&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;authurl&quot;: &quot;&quot;,
      &quot;tenant&quot;: &quot;&quot;,
      &quot;tenantid&quot;: &quot;&quot;,
      &quot;domain&quot;: &quot;&quot;,
      &quot;domainid&quot;: &quot;&quot;,
      &quot;tenantdomain&quot;: &quot;&quot;,
      &quot;tenantdomainid&quot;: &quot;&quot;
    }
  }
}
</code></pre>
<p>Options:</p>
<ul>
<li><code>rootDir</code> is root of directory storage to store database
(<code>rootDir/db</code>), downloaded packages (<code>rootDir/pool</code>) and published
repositories (<code>rootDir/public</code>)</li>
<li><code>downloadConcurrency</code> is a number of parallel download threads to
use when downloading packages</li>
<li><code>downloadSpeedLimit</code> is a limit on download bandwidth used by aptly
in kbytes per second, 0 means unlimited</li>
<li><code>architectures</code> is a list of architectures to process; if left empty
defaults to all available architectures; could be overridden with
option <code>-architectures</code></li>
<li><code>dependencyFollowSuggests</code>: follow contents of <code>Suggests:</code> field
when processing dependencies for the package</li>
<li><code>dependencyFollowRecommends</code>: follow contents of <code>Recommends:</code> field
when processing dependencies for the package</li>
<li><code>dependencyFollowAllVariants</code>: when dependency looks like
<code>package-a | package-b</code>, follow both variants always</li>
<li><code>dependencyFollowSource</code>: follow dependency from binary package to
source package</li>
<li><code>dependencyVerboseResolve</code>:
print detailed logs while resolving dependencies <span class="label label-primary">1.1.0</span>
</li>
<li><code>gpgDisableSign</code>: don&rsquo;t sign published repositories with <code>gpg</code>, also
can be disabled on per-repo basis using <code>-skip-signing</code> flag when
publishing</li>
<li><code>gpgDisableVerify</code>: don&rsquo;t verify remote mirrors with <code>gpg</code>, also can
be disabled on per-mirror basis using <code>-ignore-signatures</code> flag when
creating and updating mirrors</li>
<li><code>gpgProvider</code>: implementation of PGP signing/validation - <code>gpg</code> for external <code>gpg</code> utility or
<code>internal</code> to use <a href=/doc/feature/pgp-providers>Go internal implementation</a></li>
<li><code>downloadSourcePackages</code>: if enabled, all mirrors created would have
flag set to download source packages; this setting could be
controlled on per-mirror basis with <code>-with-sources</code> flag</li>
<li><code>skipLegacyPool</code>: in aptly up to version 1.0.0,
package files were stored in internal package pool
with MD5-dervied path, since 1.1.0 package pool layout was changed;
if option is enabled, aptly stops checking for legacy paths;
by default option is enabled for new aptly installations and disabled when
upgrading from older versions <span class="label label-primary">1.1.0</span>
</li>
<li><code>ppaDistributorID</code> & <code>ppaCodename</code> specifies parameters for short
PPA url expansion, if left blank they default to output of
<code>lsb_release</code> command</li>
<li><code>FileSystemPublishEndpoints</code> is configuration of local filesystem
publishing endpoints (see <a href=/doc/feature/filesystem>custom filesystem publishing</a>) <span class="label label-primary">1.1.0</span>
</li>
<li><code>S3PublishEndpoints</code> is a configuration of Amazon S3 publishing
endpoints (see <a href=/doc/feature/s3/>publishing to S3</a>)</li>
<li><code>SwiftPublishEndpoints</code> describes OpenStack Swift publishing
parameters (see <a href=/doc/feature/swift>publishing to Swift</a>)</li>
</ul>
<div class="alert alert-warning alert-note"><strong>Warning:</strong> <code>rootDir</code> contains all the downloaded packages from remote
mirrors, so it should have enough space. For example. mirror of Debian
wheezy (amd64 and i386) requires 70 GiB of disk space.</div>
<p>aptly would use HTTP proxy configured in <code>HTTP_PROXY</code> environment
variable.</p>
<div id=disqus_thread></div>
<script type=text/javascript>(function(){var a,b,c,d;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='aptly',c='Configuration',d='/doc/configuration/'.replace(/\/$/,""),a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</div>
</div>
</div>
</section>
<footer id=page-footer>
<div class=container>
<nav class="navbar navbar-default navbar-static-top" role=navigation>
<ul class="nav navbar-nav nav-justified">
<li><a href=/tutorial/>tutorials</a></li>
<li><a href=/download/>download</a></li>
<li><a href=/support/>support</a></li>
<li class=active><a href=/doc/overview/>documentation</a></li>
<li><a href=/about/>about</a></li>
<li><a href=/post/>blog</a></li>
</ul>
</nav>
<div class=copy>
Sponsored by <a href=http://express42.com/>express42</a> &copy;&nbsp;2013-2018 aptly contributors
</div>
</div>
</footer>
<script src=https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/aptly.js></script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-6065617-2','aptly.info'),ga('send','pageview')</script>
</body>
</html>