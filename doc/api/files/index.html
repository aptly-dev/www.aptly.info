<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>aptly - File Upload API</title><meta name=viewport content="width=device-width,initial-scale=1">
<link rel="shortcut icon" href=/www.aptly.info/favicon.ico>
<link type=text/css rel=stylesheet href=/www.aptly.info/css/styles.css>
<link rel=canonical href=http://aptly-dev.github.io/www.aptly.info/doc/api/files/>
<link href=/www.aptly.info/post/index.xml rel=alternate type=application/rss+xml title="Debian repository management tool">
</head><body>
<header id=page-header>
<div class=container>
<nav class="navbar navbar-default navbar-static-top" role=navigation>
<ul class="nav navbar-nav nav-justified">
<li><a href=/www.aptly.info/tutorial/>tutorials</a></li><li><a href=/www.aptly.info/download/>download</a></li><li><a href=/www.aptly.info/support/>support</a></li><li class=active><a href=/www.aptly.info/doc/overview/>documentation</a></li><li><a href=/www.aptly.info/about/>about</a></li><li><a href=/www.aptly.info/post/>blog</a></li></ul></nav><div class=row>
<div class="col-md-6 col-md-offset-3 text-center">
<a class=brand href=/www.aptly.info/>
<i class=brand-logo></i>
<span class=brand-name>aptly</span>
</a>
</div></div></div></header><section class=documentation>
<div class=container>
<div class=sidebar-overlay></div><div class=row>
<div class="col-md-3 col-sm-3 col-xs-3">
<div class=sidebar>
<ul class="nav nav-sidebar">
<li>
<a href=/www.aptly.info/doc/overview/>Overview</a>
</li><li>
<a href=/www.aptly.info/doc/why/>Why aptly?</a>
</li><li>
<a href=/www.aptly.info/doc/faq/>FAQ</a>
</li><li>
<a href=/www.aptly.info/doc/features/>Features</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/feature/query/>Package Queries</a>
</li><li>
<a href=/www.aptly.info/doc/feature/duplicate/>Duplicate Packages</a>
</li><li>
<a href=/www.aptly.info/doc/feature/s3/>Publishing to S3</a>
</li><li>
<a href=/www.aptly.info/doc/feature/swift/>Publishing to Swift</a>
</li><li>
<a href=/www.aptly.info/doc/feature/filesystem/>Filesystem Publishing</a>
</li><li>
<a href=/www.aptly.info/doc/feature/multi-component/>Multi-Component Publishing</a>
</li><li>
<a href=/www.aptly.info/doc/feature/pgp-providers/>PGP Providers</a>
</li><li>
<a href=/www.aptly.info/doc/feature/package-display/>Package Display Format</a>
</li><li>
<a href=/www.aptly.info/doc/feature/dependencies/>Dependency Resolving</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/configuration/>Configuration</a>
</li><li>
<a href=/www.aptly.info/doc/commands/>Commands</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/flags/>Global Flags</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/>aptly mirror</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/mirror/create/>aptly mirror create</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/update/>aptly mirror update</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/list/>aptly mirror list</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/show/>aptly mirror show</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/edit/>aptly mirror edit</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/search/>aptly mirror search</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/rename/>aptly mirror rename</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/mirror/drop/>aptly mirror drop</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/repo/>aptly repo</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/repo/create/>aptly repo create</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/add/>aptly repo add</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/include/>aptly repo include</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/import/>aptly repo import</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/show/>aptly repo show</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/list/>aptly repo list</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/copy/>aptly repo copy</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/move/>aptly repo move</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/remove/>aptly repo remove</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/search/>aptly repo search</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/edit/>aptly repo edit</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/rename/>aptly repo rename</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/repo/drop/>aptly repo drop</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/>aptly snapshot</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/snapshot/create/>aptly snapshot create</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/list/>aptly snapshot list</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/show/>aptly snapshot show</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/verify/>aptly snapshot verify</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/pull/>aptly snapshot pull</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/filter/>aptly snapshot filter</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/diff/>aptly snapshot diff</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/merge/>aptly snapshot merge</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/search/>aptly snapshot search</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/rename/>aptly snapshot rename</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/snapshot/drop/>aptly snapshot drop</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/package/>aptly package</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/package/search/>aptly package search</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/package/show/>aptly package show</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/publish/>aptly publish</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/publish/snapshot/>aptly publish snapshot</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/repo/>aptly publish repo</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/update/>aptly publish update</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/switch/>aptly publish switch</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/list/>aptly publish list</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/show/>aptly publish show</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/publish/drop/>aptly publish drop</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/db/>aptly db</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/db/cleanup/>aptly db cleanup</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/db/recover/>aptly db recover</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/task/>aptly task</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/task/run/>aptly task run</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/serve/>aptly serve</a>
</li><li>
<a href=/www.aptly.info/doc/aptly/config/>aptly config</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/aptly/config/show/>aptly config show</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/aptly/graph/>aptly graph</a>
</li></ul></li><li class=active>
<a href=/www.aptly.info/doc/api/>API</a>
<ul class=nav>
<li>
<a href=/www.aptly.info/doc/api/repos/>Local Repos API</a>
</li><li class=active>
<a href=/www.aptly.info/doc/api/files/>File Upload API</a>
</li><li>
<a href=/www.aptly.info/doc/api/snapshots/>Snapshot API</a>
</li><li>
<a href=/www.aptly.info/doc/api/publish/>Publish API</a>
</li><li>
<a href=/www.aptly.info/doc/api/packages/>Package API</a>
</li><li>
<a href=/www.aptly.info/doc/api/misc/>Misc API</a>
</li></ul></li><li>
<a href=/www.aptly.info/doc/integrations/>Integrations</a>
</li></ul><div class=source-buttons>
<a href=/www.aptly.info/download/ class="btn btn-danger">Download</a>
<a href=https://github.com/aptly-dev/aptly class="btn btn-default">Github</a>
</div></div></div><div class="col-md-9 col-sm-9 col-xs-9">
<h2 id=file-upload-api>File Upload API</h2><p>Upload package files temporarily to aptly service. These files
could be added to local repositories using <a href=/doc/api/repos>local repositories API</a>.</p><p>All uploaded files are stored under <code>&lt;rootDir>/upload</code> directory (see <a href=/doc/configuration>configuration</a>).
This directory would be created automatically if it doesn&rsquo;t exist.</p><p>Uploaded files are grouped by directories to support concurrent uploads from multiple
package sources. Local repos add API can operate on directory (adding all files from directory) or
on individual package files. By default, all successfully added package files would be removed.</p><h3 id=list-directories>List Directories</h3><p><code>GET /api/files</code></p><p>List all directories.</p><p>Response: list of directory names.</p><p>Example:</p><pre><code>$ curl http://localhost:8080/api/files
[&quot;aptly-0.9&quot;]
</code></pre><h3 id=upload-files>Upload File(s)</h3><p><code>POST /api/files/:dir</code></p><p>Parameter <code>:dir</code> is upload directory name. Directory would be created if it doesn&rsquo;t exist.</p><p>Any number of files can be uploaded in one call, aptly would preserve filenames. No check is performed
if existing uploaded would be overwritten.</p><p>Response: list of uploaded files as <code>:dir/:file</code>.</p><p>Example:</p><pre><code>$ curl -X POST -F file=@aptly_0.9~dev+217+ge5d646c_i386.deb http://localhost:8080/api/files/aptly-0.9
[&quot;aptly-0.9/aptly_0.9~dev+217+ge5d646c_i386.deb&quot;]
</code></pre><h3 id=list-files-in-directory>List Files in Directory</h3><p><code>GET /api/files/:dir</code></p><p>Returns list of files in directory.</p><p>Response: list of filenames.</p><p>HTTP Errors:</p><table>
<thead>
<tr>
<th>Code</th><th>Description</th></tr></thead><tbody>
<tr>
<td>404</td><td>directory doesn&rsquo;t exist</td></tr></tbody></table><p>Example:</p><pre><code>$ curl http://localhost:8080/api/files/aptly-0.9
[&quot;aptly_0.9~dev+217+ge5d646c_i386.deb&quot;]
</code></pre><h3 id=delete-directory>Delete Directory</h3><p><code>DELETE /api/files/:dir</code></p><p>Deletes all files in upload directory and directory itself.</p><p>Example:</p><pre><code>$ curl -X DELETE http://localhost:8080/api/files/aptly-0.9
{}
</code></pre><h3 id=delete-file-in-directory>Delete File in Directory</h3><p><code>DELETE /api/files/:dir/:file</code></p><p>Delete single file in directory.</p><p>Example:</p><pre><code>$ curl -X DELETE http://localhost:8080/api/files/aptly-0.9/aptly_0.9~dev+217+ge5d646c_i386.deb
{}
</code></pre><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var e=document.createElement("script"),t,n,s;e.type="text/javascript",e.async=!0,t="aptly",n="File Upload API",s="/www.aptly.info/doc/api/files/".replace(/\/$/,""),e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script>
<noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></section><footer id=page-footer>
<div class=container>
<nav class="navbar navbar-default navbar-static-top" role=navigation>
<ul class="nav navbar-nav nav-justified">
<li><a href=/www.aptly.info/tutorial/>tutorials</a></li><li><a href=/www.aptly.info/download/>download</a></li><li><a href=/www.aptly.info/support/>support</a></li><li class=active><a href=/www.aptly.info/doc/overview/>documentation</a></li><li><a href=/www.aptly.info/about/>about</a></li><li><a href=/www.aptly.info/post/>blog</a></li></ul></nav><div class=copy>
Sponsored by <a href=http://express42.com/>express42</a> &copy;&nbsp;2013-2018 aptly contributors
</div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js></script>
<script src=/www.aptly.info/js/bootstrap.min.js></script>
<script src=/www.aptly.info/js/aptly.js></script>
<script>(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-6065617-2","aptly.info"),ga("send","pageview")</script>
</body></html>